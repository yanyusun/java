<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dqys.business.orm.mapper.cases.CaseInfoMapper" >

  <resultMap id="BaseResultMap" type="com.dqys.business.orm.pojo.cases.CaseInfo" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="version" property="version" jdbcType="INTEGER" />
    <result column="create_at" property="createAt" jdbcType="TIMESTAMP" />
    <result column="update_at" property="updateAt" jdbcType="TIMESTAMP" />
    <result column="stateflag" property="stateflag" jdbcType="BIGINT" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="case_no" property="caseNo" jdbcType="VARCHAR" />
    <result column="type" property="type" jdbcType="VARCHAR" />
    <result column="pid" property="pid" jdbcType="INTEGER" />
    <result column="pawn_id" property="pawnId" jdbcType="INTEGER" />
    <result column="plaintiff" property="plaintiff" jdbcType="VARCHAR" />
    <result column="defendant" property="defendant" jdbcType="VARCHAR" />
    <result column="guarantor_id" property="guarantorId" jdbcType="INTEGER" />
    <result column="mortgagor" property="mortgagor" jdbcType="VARCHAR" />
    <result column="mortgage_time" property="mortgageTime" jdbcType="VARCHAR" />
    <result column="lawsuit_amount" property="lawsuitAmount" jdbcType="DOUBLE" />
    <result column="lawsuit_corpus" property="lawsuitCorpus" jdbcType="DOUBLE" />
    <result column="lawsuit_accrual" property="lawsuitAccrual" jdbcType="DOUBLE" />
    <result column="is_attachment" property="isAttachment" jdbcType="BIT" />
    <result column="attachment_time" property="attachmentTime" jdbcType="BIT" />
    <result column="attachment_code" property="attachmentCode" jdbcType="VARCHAR" />
    <result column="attachment_court" property="attachmentCourt" jdbcType="VARCHAR" />
    <result column="attachment_date" property="attachmentDate" jdbcType="TIMESTAMP" />
    <result column="is_preservation" property="isPreservation" jdbcType="BIT" />
    <result column="preservation_start" property="preservationStart" jdbcType="TIMESTAMP" />
    <result column="preservation_end" property="preservationEnd" jdbcType="TIMESTAMP" />
    <result column="memo" property="memo" jdbcType="VARCHAR" />
    <result column="lawsuit_memo" property="lawsuitMemo" jdbcType="LONGVARCHAR" />
    <result column="attachment_memo" property="attachmentMemo" jdbcType="LONGVARCHAR" />
    <result column="preservation_memo" property="preservationMemo" jdbcType="LONGVARCHAR" />
  </resultMap>

  <!-- 基础字段 -->
  <sql id="Base_Column_List" >
    id, version, create_at, update_at, stateflag, remark, case_no, lender_id, type, pid,
    pawn_id, plaintiff, defendant, guarantor_id, mortgagor, mortgage_time, lawsuit_amount,
    lawsuit_corpus, lawsuit_accrual, is_attachment, attachment_time, attachment_code,
    attachment_court, attachment_date, is_preservation, preservation_start, preservation_end,
    memo, lawsuit_memo, attachment_memo, preservation_memo
  </sql>

  <!-- 逻辑删除-->
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    UPDATE bt_case SET stateflag = CURRENT_TIMESTAMP
    where id = #{id,jdbcType=INTEGER}
  </delete>

  <!-- 新增-->
  <insert id="insert" parameterType="com.dqys.business.orm.pojo.asset.LenderInfo" useGeneratedKeys="true" keyProperty="id">
    insert into bt_case
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="remark != null" >
        remark,
      </if>
      <if test="caseNo != null" >
        case_no,
      </if>
      <if test="type != null" >
        type,
      </if>
      <if test="pid != null" >
        pid,
      </if>
      <if test="pawnId != null" >
        pawn_id,
      </if>
      <if test="plaintiff != null" >
        plaintiff,
      </if>
      <if test="defendant != null" >
        defendant,
      </if>
      <if test="guarantorId != null" >
        guarantor_id,
      </if>
      <if test="mortgagor != null" >
        mortgagor,
      </if>
      <if test="mortgageTime != null" >
        mortgage_time,
      </if>
      <if test="lawsuitAmount != null" >
        lawsuit_amount,
      </if>
      <if test="lawsuitCorpus != null" >
        lawsuit_corpus,
      </if>
      <if test="lawsuitAccrual != null" >
        lawsuit_accrual,
      </if>
      <if test="isAttachment != null" >
        is_attachment,
      </if>
      <if test="attachmentTime != null" >
        attachment_time,
      </if>
      <if test="attachmentCode != null" >
        attachment_code,
      </if>
      <if test="attachmentCourt != null" >
        attachment_court,
      </if>
      <if test="attachmentDate != null" >
        attachment_date,
      </if>
      <if test="isPreservation != null" >
        is_preservation,
      </if>
      <if test="preservationStart != null" >
        preservation_start,
      </if>
      <if test="preservationEnd != null" >
        preservation_end,
      </if>
      <if test="memo != null" >
        memo,
      </if>
      <if test="lawsuitMemo != null" >
        lawsuit_memo,
      </if>
      <if test="attachmentMemo != null" >
        attachment_memo,
      </if>
      <if test="preservationMemo != null" >
        preservation_memo,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="remark != null" >
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="caseNo != null" >
        #{caseNo,jdbcType=VARCHAR},
      </if>
      <if test="type != null" >
        #{type,jdbcType=VARCHAR},
      </if>
      <if test="pid != null" >
        #{pid,jdbcType=INTEGER},
      </if>
      <if test="pawnId != null" >
        #{pawnId,jdbcType=INTEGER},
      </if>
      <if test="plaintiff != null" >
        #{plaintiff,jdbcType=VARCHAR},
      </if>
      <if test="defendant != null" >
        #{defendant,jdbcType=VARCHAR},
      </if>
      <if test="guarantorId != null" >
        #{guarantorId,jdbcType=VARCHAR},
      </if>
      <if test="mortgagor != null" >
        #{mortgagor,jdbcType=VARCHAR},
      </if>
      <if test="mortgageTime != null" >
        #{mortgageTime,jdbcType=VARCHAR},
      </if>
      <if test="lawsuitAmount != null" >
        #{lawsuitAmount,jdbcType=DOUBLE},
      </if>
      <if test="lawsuitCorpus != null" >
        #{lawsuitCorpus,jdbcType=DOUBLE},
      </if>
      <if test="lawsuitAccrual != null" >
        #{lawsuitAccrual,jdbcType=DOUBLE},
      </if>
      <if test="isAttachment != null" >
        #{isAttachment,jdbcType=BIT},
      </if>
      <if test="attachmentTime != null" >
        #{attachmentTime,jdbcType=BIT},
      </if>
      <if test="attachmentCode != null" >
        #{attachmentCode,jdbcType=VARCHAR},
      </if>
      <if test="attachmentCourt != null" >
        #{attachmentCourt,jdbcType=VARCHAR},
      </if>
      <if test="attachmentDate != null" >
        #{attachmentDate,jdbcType=TIMESTAMP},
      </if>
      <if test="isPreservation != null" >
        #{isPreservation,jdbcType=BIT},
      </if>
      <if test="preservationStart != null" >
        #{preservationStart,jdbcType=TIMESTAMP},
      </if>
      <if test="preservationEnd != null" >
        #{preservationEnd,jdbcType=TIMESTAMP},
      </if>
      <if test="memo != null" >
        #{memo,jdbcType=VARCHAR},
      </if>
      <if test="lawsuitMemo != null" >
        #{lawsuitMemo,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentMemo != null" >
        #{attachmentMemo,jdbcType=LONGVARCHAR},
      </if>
      <if test="preservationMemo != null" >
        #{preservationMemo,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>

  <!-- 修改 -->
  <update id="update" parameterType="com.dqys.business.orm.pojo.cases.CaseInfo" >
    update bt_case
    <set >
      version = version+1,
      update_at = CURRENT_TIMESTAMP ,
      <if test="remark != null" >
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="caseNo != null" >
        case_no = #{caseNo,jdbcType=VARCHAR},
      </if>
      <if test="type != null" >
        type = #{type,jdbcType=VARCHAR},
      </if>
      <if test="pid != null" >
        pid = #{pid,jdbcType=INTEGER},
      </if>
      <if test="pawnId != null" >
        pawn_id = #{pawnId,jdbcType=INTEGER},
      </if>
      <if test="plaintiff != null" >
        plaintiff = #{plaintiff,jdbcType=VARCHAR},
      </if>
      <if test="defendant != null" >
        defendant = #{defendant,jdbcType=VARCHAR},
      </if>
      <if test="guarantorId != null" >
        guarantor_id = #{guarantorId,jdbcType=INTEGER},
      </if>
      <if test="mortgagor != null" >
        mortgagor = #{mortgagor,jdbcType=VARCHAR},
      </if>
      <if test="mortgageTime != null" >
        mortgage_time = #{mortgageTime,jdbcType=VARCHAR},
      </if>
      <if test="lawsuitAmount != null" >
        lawsuit_amount = #{lawsuitAmount,jdbcType=DOUBLE},
      </if>
      <if test="lawsuitCorpus != null" >
        lawsuit_corpus = #{lawsuitCorpus,jdbcType=DOUBLE},
      </if>
      <if test="lawsuitAccrual != null" >
        lawsuit_accrual = #{lawsuitAccrual,jdbcType=DOUBLE},
      </if>
      <if test="isAttachment != null" >
        is_attachment = #{isAttachment,jdbcType=BIT},
      </if>
      <if test="attachmentTime != null" >
        attachment_time = #{attachmentTime,jdbcType=BIT},
      </if>
      <if test="attachmentCode != null" >
        attachment_code = #{attachmentCode,jdbcType=VARCHAR},
      </if>
      <if test="attachmentCourt != null" >
        attachment_court = #{attachmentCourt,jdbcType=VARCHAR},
      </if>
      <if test="attachmentDate != null" >
        attachment_date = #{attachmentDate,jdbcType=TIMESTAMP},
      </if>
      <if test="isPreservation != null" >
        is_preservation = #{isPreservation,jdbcType=BIT},
      </if>
      <if test="preservationStart != null" >
        preservation_start = #{preservationStart,jdbcType=TIMESTAMP},
      </if>
      <if test="preservationEnd != null" >
        preservation_end = #{preservationEnd,jdbcType=TIMESTAMP},
      </if>
      <if test="memo != null" >
        memo = #{memo,jdbcType=VARCHAR},
      </if>
      <if test="lawsuitMemo != null" >
        lawsuit_memo = #{lawsuitMemo,jdbcType=LONGVARCHAR},
      </if>
      <if test="attachmentMemo != null" >
        attachment_memo = #{attachmentMemo,jdbcType=LONGVARCHAR},
      </if>
      <if test="preservationMemo != null" >
        preservation_memo = #{preservationMemo,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>

  <!-- 根据Id获取-->
  <select id="get" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    SELECT * from bt_case where id = #{id,jdbcType=INTEGER}
  </select>

</mapper>